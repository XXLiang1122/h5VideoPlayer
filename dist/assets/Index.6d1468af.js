var a=Object.assign;import{d as e,r as n,j as s,k as t,t as o,u as l,p as i,a as d,o as r,c,b as h,l as u,v as f,F as g,w as v,e as m}from"./index.bd2fe7f0.js";import{_ as p,s as k}from"./index.ad3b6129.js";let L=!1;var b=e({name:"Search",components:{List:p},beforeRouteEnter:(a,e,n)=>{L="/"===e.path,n()},setup:()=>{const e=l();let i=1;const d=n({list:[],loading:!1,finished:!1}),r=s("");let c=s(!1);t((()=>{L&&(d.list=[],d.loading=!1,d.finished=!1,r.value="")}));const h=async()=>{const a=await k(i,r.value);if(a.length>0)for(let e=0;e<a.length;e++)d.list.push(a[e]);else d.finished=!0;d.loading=!1,c.value=!1,i++};return a(a({},o(d)),{onLoad:h,onSearch:()=>{r.value&&(d.list=[],d.finished=!1,i=1,c.value=!0,h())},keyword:r,isLoading:c,back:()=>{e.back()}})}});const y=v("data-v-6a837ca8");i("data-v-6a837ca8");const w={action:"/"};d();const S=y(((a,e,n,s,t,o)=>{const l=m("van-nav-bar"),i=m("van-search"),d=m("van-skeleton"),v=m("van-empty"),p=m("List"),k=m("van-list");return r(),c(g,null,[h(l,{title:"搜索","left-arrow":"",onClickLeft:a.back},null,8,["onClickLeft"]),h("form",w,[h(i,{modelValue:a.keyword,"onUpdate:modelValue":e[1]||(e[1]=e=>a.keyword=e),autofocus:"",placeholder:"请输入搜索关键词",onSearch:a.onSearch},null,8,["modelValue","onSearch"])]),u(h(d,{style:{"margin-top":".2rem"},title:"",row:4},null,512),[[f,a.isLoading&&0===a.list.length]]),h(k,{loading:a.loading,"onUpdate:loading":e[2]||(e[2]=e=>a.loading=e),finished:a.finished,"immediate-check":!1,"finished-text":"没有更多了",onLoad:a.onLoad},{default:y((()=>[0!==a.list.length||a.isLoading?(r(),c(p,{key:1,list:a.list},null,8,["list"])):(r(),c(v,{key:0,image:"search"}))])),_:1},8,["loading","finished","onLoad"])],64)}));b.render=S,b.__scopeId="data-v-6a837ca8";export default b;
